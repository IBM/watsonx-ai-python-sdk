<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../../genindex.html" /><link rel="search" title="Search" href="../../../../search.html" />

    <!-- Generated with Sphinx 8.0.2 and Furo 2024.08.06 -->
        <title>ibm_watsonx_ai.experiment.autoai.autoai - IBM watsonx.ai</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/mystyle2.css?v=c40128c6" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --font-stack: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, Segoe UI, Arial, sans-serif;
  --font-stack--monospace: 'IBM Plex Mono', 'SFMono-Regular', Menlo, Consolas, Lucida Console, monospace;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../index.html"><div class="brand">IBM watsonx.ai</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../../../index.html">
  
  
  <span class="sidebar-brand-text">IBM watsonx.ai</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../install.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../setup.html">Setup</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Setup</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../setup_cloud.html">IBM watsonx.ai for IBM Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../setup_cpd.html">IBM watsonx.ai software</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../api.html">API</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../base.html">Base</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../core_api.html">Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../federated_learning.html">Federated Learning</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../dataconnection.html">Data Connections</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Data Connections</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoai_working_with_dataconnection.html">Working with DataConnection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dataconnection_modules.html">DataConnection Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../iterabledatasets_modules.html">IterableDatasets Modules</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../autoai.html">AutoAI</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of AutoAI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoai_working_with_class_and_optimizer.html">Working with AutoAI class and optimizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoai_working_with_class_and_rag_optimizer.html">Working with AutoAI RAG class and rag_optimizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoai_experiment.html">AutoAI experiment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoai_deployment_modules.html">Deployment Modules for AutoAI models</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../foundation_models.html">Foundation Models</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Foundation Models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../fm_embeddings.html">Embeddings</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../fm_models.html">Models</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../fm_model.html">Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../fm_model_inference.html">ModelInference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../fm_deployments.html"><code class="docutils literal notranslate"><span class="pre">ModelInference</span></code> for Deployments</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../prompt_tuner.html">Prompt Tuning</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Prompt Tuning</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../../pt_working_with_class_and_prompt_tuner.html">Working with TuneExperiment and PromptTuner</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Working with TuneExperiment and PromptTuner</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../pt_tune_experiment_run.html">Tune Experiment run</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../pt_model_inference.html">Tuned Model Inference</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../../tune_experiment.html">Tune Experiment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../prompt_template_manager.html">Prompt Template Manager</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../fm_extensions.html">Extensions</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Extensions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../fm_extensions_langchain.html">LangChain</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../fm_extensions_rag.html">RAG</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../fm_helpers.html">Helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../fm_custom_models.html">Custom models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../fm_text_extraction.html">Text Extractions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../migration.html">Migration from <code class="docutils literal notranslate"><span class="pre">ibm_watson_machine_learning</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../migration_v1.html">V1 Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">Changelog</a></li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <h1>Source code for ibm_watsonx_ai.experiment.autoai.autoai</h1><div class="highlight"><pre>
<span></span><span class="c1">#  -----------------------------------------------------------------------------------------</span>
<span class="c1">#  (C) Copyright IBM Corp. 2023-2024.</span>
<span class="c1">#  https://opensource.org/licenses/BSD-3-Clause</span>
<span class="c1">#  -----------------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">TYPE_CHECKING</span>
<span class="kn">from</span> <span class="nn">warnings</span> <span class="kn">import</span> <span class="n">warn</span>

<span class="kn">from</span> <span class="nn">ibm_watsonx_ai.utils.autoai.enums</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">TShirtSize</span><span class="p">,</span>
    <span class="n">ClassificationAlgorithms</span><span class="p">,</span>
    <span class="n">RegressionAlgorithms</span><span class="p">,</span>
    <span class="n">ForecastingAlgorithms</span><span class="p">,</span>
    <span class="n">PredictionType</span><span class="p">,</span>
    <span class="n">Metrics</span><span class="p">,</span>
    <span class="n">Transformers</span><span class="p">,</span>
    <span class="n">DataConnectionTypes</span><span class="p">,</span>
    <span class="n">PipelineTypes</span><span class="p">,</span>
    <span class="n">PositiveLabelClass</span><span class="p">,</span>
    <span class="n">ClassificationAlgorithmsCP4D</span><span class="p">,</span>
    <span class="n">RegressionAlgorithmsCP4D</span><span class="p">,</span>
    <span class="n">ForecastingAlgorithmsCP4D</span><span class="p">,</span>
    <span class="n">SamplingTypes</span><span class="p">,</span>
    <span class="n">ImputationStrategy</span><span class="p">,</span>
    <span class="n">ForecastingPipelineTypes</span><span class="p">,</span>
    <span class="n">TimeseriesAnomalyPredictionPipelineTypes</span><span class="p">,</span>
    <span class="n">TimeseriesAnomalyPredictionAlgorithms</span><span class="p">,</span>
    <span class="n">RAGMetrics</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">ibm_watsonx_ai.utils.autoai.errors</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">LocalInstanceButRemoteParameter</span><span class="p">,</span>
    <span class="n">MissingPositiveLabel</span><span class="p">,</span>
    <span class="n">NonForecastPredictionColumnMissing</span><span class="p">,</span>
    <span class="n">ForecastPredictionColumnsMissing</span><span class="p">,</span>
    <span class="n">ForecastingCannotBeRunAsLocalScenario</span><span class="p">,</span>
    <span class="n">TSNotSupported</span><span class="p">,</span>
    <span class="n">TSADNotSupported</span><span class="p">,</span>
    <span class="n">ImputationListNotSupported</span><span class="p">,</span>
    <span class="n">MissingEstimatorForExistingBatchedEstimator</span><span class="p">,</span>
    <span class="n">TimeseriesAnomalyPredictionFeatureColumnsMissing</span><span class="p">,</span>
    <span class="n">TimeseriesAnomalyPredictionCannotBeRunAsLocalScenario</span><span class="p">,</span>
    <span class="n">TimeseriesAnomalyPredictionUnsupportedMetric</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">ibm_watsonx_ai.utils.autoai.utils</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">check_dependencies_versions</span><span class="p">,</span>
    <span class="n">validate_additional_params_for_optimizer</span><span class="p">,</span>
    <span class="n">validate_optimizer_enum_values</span><span class="p">,</span>
    <span class="n">translate_imputation_string_strategy_to_enum</span><span class="p">,</span>
    <span class="n">translate_estimator_string_to_enum</span><span class="p">,</span>
    <span class="n">translate_batched_estimator_string_to_enum</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">ibm_watsonx_ai.workspace</span> <span class="kn">import</span> <span class="n">WorkSpace</span>
<span class="kn">from</span> <span class="nn">ibm_watsonx_ai.wml_client_error</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ForbiddenActionForGitBasedProject</span><span class="p">,</span>
    <span class="n">WMLClientError</span><span class="p">,</span>
    <span class="n">ParamOutOfRange</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">ibm_watsonx_ai.messages.messages</span> <span class="kn">import</span> <span class="n">Messages</span>
<span class="kn">from</span> <span class="nn">.engines</span> <span class="kn">import</span> <span class="n">ServiceEngine</span>
<span class="kn">from</span> <span class="nn">.optimizers</span> <span class="kn">import</span> <span class="n">LocalAutoPipelines</span><span class="p">,</span> <span class="n">RemoteAutoPipelines</span>
<span class="kn">from</span> <span class="nn">.runs</span> <span class="kn">import</span> <span class="n">AutoPipelinesRuns</span><span class="p">,</span> <span class="n">LocalAutoPipelinesRuns</span>
<span class="kn">from</span> <span class="nn">..base_experiment.base_experiment</span> <span class="kn">import</span> <span class="n">BaseExperiment</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;AutoAI&quot;</span><span class="p">]</span>

<span class="kn">from</span> <span class="nn">...credentials</span> <span class="kn">import</span> <span class="n">Credentials</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">.optimizers</span> <span class="kn">import</span> <span class="n">RAGOptimizer</span>


<div class="viewcode-block" id="AutoAI">
<a class="viewcode-back" href="../../../../autoai_experiment.html#ibm_watsonx_ai.experiment.autoai.autoai.AutoAI">[docs]</a>
<span class="k">class</span> <span class="nc">AutoAI</span><span class="p">(</span><span class="n">BaseExperiment</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AutoAI class for automizing pipeline model optimization.</span>

<span class="sd">    :param credentials: credentials to instance</span>
<span class="sd">    :type credentials: dict</span>

<span class="sd">    :param project_id: ID of the Watson Studio project</span>
<span class="sd">    :type project_id: str, optional</span>

<span class="sd">    :param space_id: ID of the Watson Studio Space</span>
<span class="sd">    :type space_id: str, optional</span>

<span class="sd">    :param verify: You can pass one of the following as verify:</span>

<span class="sd">        * the path to a CA_BUNDLE file</span>
<span class="sd">        * the path of directory with certificates of trusted CAs</span>
<span class="sd">        * `True` - takes the default path to the truststore</span>
<span class="sd">        * `False` - makes no verification</span>
<span class="sd">    :type verify: bool or str, optional</span>

<span class="sd">    **Example:**</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">        from ibm_watsonx_ai.experiment import AutoAI</span>

<span class="sd">        experiment = AutoAI(</span>
<span class="sd">            credentials={</span>
<span class="sd">                &quot;apikey&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;iam_apikey_description&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;iam_apikey_name&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;iam_role_crn&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;iam_serviceid_crn&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;instance_id&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;url&quot;: &quot;https://us-south.ml.cloud.ibm.com&quot;</span>
<span class="sd">            },</span>
<span class="sd">            project_id=&quot;...&quot;,</span>
<span class="sd">            space_id=&quot;...&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># note: initialization of AutoAI enums as class properties</span>

    <span class="c1"># note: Enums with estimators can be overwritten  in _init based on environment type (CPD or Cloud)</span>
    <span class="n">ClassificationAlgorithms</span> <span class="o">=</span> <span class="n">ClassificationAlgorithms</span>
    <span class="n">RegressionAlgorithms</span> <span class="o">=</span> <span class="n">RegressionAlgorithms</span>
    <span class="n">ForecastingAlgorithms</span> <span class="o">=</span> <span class="n">ForecastingAlgorithms</span>
    <span class="c1"># end note</span>
    <span class="n">TShirtSize</span> <span class="o">=</span> <span class="n">TShirtSize</span>
    <span class="n">PredictionType</span> <span class="o">=</span> <span class="n">PredictionType</span>
    <span class="n">Metrics</span> <span class="o">=</span> <span class="n">Metrics</span>
    <span class="n">Transformers</span> <span class="o">=</span> <span class="n">Transformers</span>
    <span class="n">DataConnectionTypes</span> <span class="o">=</span> <span class="n">DataConnectionTypes</span>
    <span class="n">PipelineTypes</span> <span class="o">=</span> <span class="n">PipelineTypes</span>
    <span class="n">SamplingTypes</span> <span class="o">=</span> <span class="n">SamplingTypes</span>
    <span class="n">RAGMetrics</span> <span class="o">=</span> <span class="n">RAGMetrics</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">credentials</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Credentials</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="s2">&quot;WorkSpace&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">project_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">space_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">verify</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># note: as workspace is not clear enough to understand, there is a possibility to use pure</span>
        <span class="c1"># credentials with project and space IDs, but in addition we</span>
        <span class="c1"># leave a possibility to use a previous WorkSpace implementation, it could be passed as a first argument</span>
        <span class="c1"># note: backward compatibility</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">wml_credentials</span> <span class="o">:=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;wml_credentials&quot;</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">credentials</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">credentials</span> <span class="o">=</span> <span class="n">wml_credentials</span>
            <span class="n">warn</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="s2">&quot;`wml_credentials` is deprecated and will be removed in future. &quot;</span>
                    <span class="s2">&quot;Instead, please use `credentials`.&quot;</span>
                <span class="p">),</span>
                <span class="n">category</span><span class="o">=</span><span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">credentials</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">credentials</span><span class="p">,</span> <span class="n">_verify</span><span class="o">=</span><span class="n">verify</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">credentials</span><span class="p">,</span> <span class="n">Credentials</span><span class="p">):</span>
            <span class="n">credentials</span><span class="o">.</span><span class="n">_set_env_vars_from_credentials</span><span class="p">()</span>

        <span class="c1"># --- end note</span>
        <span class="k">if</span> <span class="n">credentials</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">runs</span> <span class="o">=</span> <span class="n">LocalAutoPipelinesRuns</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">credentials</span><span class="p">,</span> <span class="n">WorkSpace</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="n">credentials</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="n">WorkSpace</span><span class="p">(</span>
                    <span class="n">credentials</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">credentials</span><span class="p">),</span>
                    <span class="n">project_id</span><span class="o">=</span><span class="n">project_id</span><span class="p">,</span>
                    <span class="n">space_id</span><span class="o">=</span><span class="n">space_id</span><span class="p">,</span>
                    <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">project_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">project_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">space_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">space_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">runs</span> <span class="o">=</span> <span class="n">AutoPipelinesRuns</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="n">ServiceEngine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">runs</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span>

        <span class="c1"># self._block_autoai_on_git_based_project()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_init_estimator_enums</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_20_class_limit_removal_test</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># --- end note</span>

<div class="viewcode-block" id="AutoAI.runs">
<a class="viewcode-back" href="../../../../autoai_experiment.html#ibm_watsonx_ai.experiment.autoai.autoai.AutoAI.runs">[docs]</a>
    <span class="k">def</span> <span class="nf">runs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;AutoPipelinesRuns&quot;</span><span class="p">,</span> <span class="s2">&quot;LocalAutoPipelinesRuns&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the historical runs with a Pipeline name filter (for remote scenario).</span>
<span class="sd">        Get the historical runs with an experiment name filter (for local scenario).</span>

<span class="sd">        :param filter: Pipeline name to filter the historical runs or experiment name to filter</span>
<span class="sd">            the local historical runs</span>
<span class="sd">        :type filter: str</span>

<span class="sd">        :return: object that manages the list of runs</span>
<span class="sd">        :rtype: AutoPipelinesRuns or LocalAutoPipelinesRuns</span>

<span class="sd">        **Example:**</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from ibm_watsonx_ai.experiment import AutoAI</span>

<span class="sd">            experiment = AutoAI(...)</span>
<span class="sd">            experiment.runs(filter=&#39;Test&#39;).list()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LocalAutoPipelinesRuns</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">AutoPipelinesRuns</span><span class="p">(</span>
                <span class="n">engine</span><span class="o">=</span><span class="n">ServiceEngine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">api_client</span><span class="p">),</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="AutoAI.optimizer">
<a class="viewcode-back" href="../../../../autoai_experiment.html#ibm_watsonx_ai.experiment.autoai.autoai.AutoAI.optimizer">[docs]</a>
    <span class="k">def</span> <span class="nf">optimizer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">prediction_type</span><span class="p">:</span> <span class="s2">&quot;PredictionType&quot;</span><span class="p">,</span>
        <span class="n">prediction_column</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">prediction_columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timestamp_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">scoring</span><span class="p">:</span> <span class="s2">&quot;Metrics&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">desc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">test_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># deprecated</span>
        <span class="n">holdout_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_number_of_estimators</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">train_sample_rows_test_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_only_estimators</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span>
                <span class="s2">&quot;ClassificationAlgorithms&quot;</span><span class="p">,</span>
                <span class="s2">&quot;RegressionAlgorithms&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ForecastingAlgorithms&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TimeseriesAnomalyPredictionAlgorithms&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">daub_include_only_estimators</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;ClassificationAlgorithms&quot;</span><span class="p">,</span> <span class="s2">&quot;RegressionAlgorithms&quot;</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># deprecated</span>
        <span class="n">include_batched_ensemble_estimators</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;BatchedClassificationAlgorithms&quot;</span><span class="p">,</span> <span class="s2">&quot;BatchedRegressionAlgorithms&quot;</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">backtest_num</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lookback_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">forecast_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">backtest_gap_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">feature_columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pipeline_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span>
                <span class="s2">&quot;ForecastingPipelineTypes&quot;</span><span class="p">,</span> <span class="s2">&quot;TimeseriesAnomalyPredictionPipelineTypes&quot;</span>
            <span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">supporting_features_at_forecast</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cognito_transform_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Transformers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">csv_separator</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span>
        <span class="n">excel_sheet</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">encoding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
        <span class="n">positive_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">drop_duplicates</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">outliers_columns</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">text_processing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">word2vec_feature_number</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">daub_give_priority_to_runtime</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fairness_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sampling_type</span><span class="p">:</span> <span class="s2">&quot;SamplingTypes&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sample_size_limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sample_rows_limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sample_percentage_limit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">n_parallel_data_connections</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">number_of_batch_rows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">categorical_imputation_strategy</span><span class="p">:</span> <span class="n">ImputationStrategy</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">numerical_imputation_strategy</span><span class="p">:</span> <span class="n">ImputationStrategy</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">numerical_imputation_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">imputation_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">retrain_on_holdout</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">categorical_columns</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">numerical_columns</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">test_data_csv_separator</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span>
        <span class="n">test_data_excel_sheet</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">test_data_encoding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
        <span class="n">confidence_level</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">incremental_learning</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">early_stop_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">early_stop_window_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">time_ordered_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">feature_selector_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;RemoteAutoPipelines&quot;</span><span class="p">,</span> <span class="s2">&quot;LocalAutoPipelines&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an AutoAI optimizer.</span>

<span class="sd">        :param name: name of the AutoPipelines</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :param prediction_type: the type of prediction</span>
<span class="sd">        :type prediction_type: PredictionType</span>

<span class="sd">        :param prediction_column: name of the target/label column, required for `multiclass`, `binary`, and `regression`</span>
<span class="sd">            prediction types</span>
<span class="sd">        :type prediction_column: str, optional</span>

<span class="sd">        :param prediction_columns: names of the target/label columns, required for `forecasting` prediction type</span>
<span class="sd">        :type prediction_columns: list[str], optional</span>

<span class="sd">        :param timestamp_column_name: name of the timestamp column for time series forecasting</span>
<span class="sd">        :type timestamp_column_name: str, optional</span>

<span class="sd">        :param scoring: type of the metric to optimize with, not used for forecasting</span>
<span class="sd">        :type scoring: Metrics, optional</span>

<span class="sd">        :param desc: description</span>
<span class="sd">        :type desc: str, optional</span>

<span class="sd">        :param test_size: deprecated, use `holdout_size` instead</span>

<span class="sd">        :param holdout_size: percentage of the entire dataset to leave as a holdout</span>
<span class="sd">        :type holdout_size: float, optional</span>

<span class="sd">        :param max_number_of_estimators: maximum number (top-K ranked by DAUB model selection)</span>
<span class="sd">            of the selected algorithm, or estimator types, for example `LGBMClassifierEstimator`,</span>
<span class="sd">            `XGBoostClassifierEstimator`, or `LogisticRegressionEstimator` to use in the pipeline composition,</span>
<span class="sd">            the default is `None` which means that the true default value is determined by</span>
<span class="sd">            the internal different algorithms which uses only the algorithm type that is ranked the highest by the model selection</span>
<span class="sd">        :type max_number_of_estimators: int, optional</span>

<span class="sd">        :param train_sample_rows_test_size: percentage of training data sampling</span>
<span class="sd">        :type train_sample_rows_test_size: float, optional</span>

<span class="sd">        :param daub_include_only_estimators: deprecated, use `include_only_estimators` instead</span>

<span class="sd">        :param include_batched_ensemble_estimators: list of batched ensemble estimators to include</span>
<span class="sd">            in the computation process, see: AutoAI.BatchedClassificationAlgorithms, AutoAI.BatchedRegressionAlgorithms</span>
<span class="sd">        :type include_batched_ensemble_estimators:</span>
<span class="sd">            list[BatchedClassificationAlgorithms or BatchedRegressionAlgorithms], optional</span>

<span class="sd">        :param include_only_estimators: list of estimators to include in the computation process, see:</span>
<span class="sd">            AutoAI.ClassificationAlgorithms, AutoAI.RegressionAlgorithms or AutoAI.ForecastingAlgorithms</span>
<span class="sd">        :type include_only_estimators: List[ClassificationAlgorithms or RegressionAlgorithms or ForecastingAlgorithms]], optional</span>

<span class="sd">        :param backtest_num: number of backtests used for forecasting prediction type, default value: 4,</span>
<span class="sd">            value from range [0, 20]</span>
<span class="sd">        :type backtest_num: int, optional</span>

<span class="sd">        :param lookback_window: length of lookback window used for forecasting prediction type,</span>
<span class="sd">            default value: 10, if set to -1 lookback window will be auto-detected</span>
<span class="sd">        :type lookback_window: int, optional</span>

<span class="sd">        :param forecast_window: length of forecast window used for forecasting prediction type, default value: 1,</span>
<span class="sd">            value from range [1, 60]</span>
<span class="sd">        :type forecast_window: int, optional</span>

<span class="sd">        :param backtest_gap_length: gap between backtests used for forecasting prediction type,</span>
<span class="sd">            default value: 0, value from range [0, data length / 4]</span>
<span class="sd">        :type backtest_gap_length: int, optional</span>

<span class="sd">        :param feature_columns: list of feature columns used for the forecasting prediction type,</span>
<span class="sd">            might contain target column and/or supporting feature columns, list of columns to be detected whether there are anomalies for timeseries anomaly prediction type</span>
<span class="sd">        :type feature_columns: list[str], optional</span>

<span class="sd">        :param pipeline_types: list of pipeline types to be used for forecasting or timeseries anomaly prediction type</span>
<span class="sd">        :type pipeline_types: list[ForecastingPipelineTypes or TimeseriesAnomalyPredictionPipelineTypes], optional</span>

<span class="sd">        :param supporting_features_at_forecast: enables the use of future supporting feature values during the forecast</span>
<span class="sd">        :type supporting_features_at_forecast: bool, optional</span>

<span class="sd">        :param cognito_transform_names: list of transformers to include in the feature enginnering computation process,</span>
<span class="sd">            see: AutoAI.Transformers</span>
<span class="sd">        :type cognito_transform_names: list[Transformers], optional</span>

<span class="sd">        :param csv_separator: the separator or list of separators for separating columns in a CSV file,</span>
<span class="sd">            not used if the file_name is not a CSV file, default is &#39;,&#39;</span>
<span class="sd">        :type csv_separator: list[str] or str, optional</span>

<span class="sd">        :param excel_sheet: name of the excel sheet to use, only applicable when the xlsx file is an input,</span>
<span class="sd">            support for number of the sheet is deprecated, by default first sheet is used</span>
<span class="sd">        :type excel_sheet: str, optional</span>

<span class="sd">        :param encoding: encoding type for the CSV training file</span>
<span class="sd">        :type encoding: str, optional</span>

<span class="sd">        :param positive_label: the positive class to report when binary classification, when multiclass or regression,</span>
<span class="sd">            this is ignored</span>
<span class="sd">        :type positive_label: str, optional</span>

<span class="sd">        :param t_shirt_size: size of the remote AutoAI POD instance (computing resources),</span>
<span class="sd">            only applicable to a remote scenario, see: AutoAI.TShirtSize</span>
<span class="sd">        :type t_shirt_size: TShirtSize, optional</span>

<span class="sd">        :param drop_duplicates: if `True`, duplicated rows in data are removed before further processing</span>
<span class="sd">        :type drop_duplicates: bool, optional</span>

<span class="sd">        :param outliers_columns: replace outliers with NaN using the IQR method for specified columns, by default,</span>
<span class="sd">            turned ON for regression learning_type and target column, to turn OFF pass an empty list of columns</span>
<span class="sd">        :type outliers_columns: list, optional</span>

<span class="sd">        :param text_processing: if `True` text processing will be enabled, applicable only on Cloud</span>
<span class="sd">        :type text_processing: bool, optional</span>

<span class="sd">        :param word2vec_feature_number: number of features to be generated from the text column,</span>
<span class="sd">            applied only if `text_processing` is `True`, if `None` the default value will be taken</span>
<span class="sd">        :type word2vec_feature_number: int, optional</span>

<span class="sd">        :param daub_give_priority_to_runtime: the importance of run time over score for pipelines ranking,</span>
<span class="sd">            can take values between 0 and 5, if set to 0.0 only score is used,</span>
<span class="sd">            if set to 1 equally score and runtime are used, if set to value higher than 1</span>
<span class="sd">            the runtime gets higher importance over score</span>
<span class="sd">        :type daub_give_priority_to_runtime: float, optional</span>

<span class="sd">        :param fairness_info: dictionary that specifies the metadata needed for measuring fairness,</span>
<span class="sd">            it contains three key values: `favorable_labels`, `unfavorable_labels`, and `protected_attributes`,</span>
<span class="sd">            the `favorable_labels` attribute indicates a positive outcome when the class column contains one of the values from list,</span>
<span class="sd">            the `unfavorable_labels` is opposite to the `favorable_labels`</span>
<span class="sd">            and is obligatory for the regression learning type, `protected_attributes` is a list of features that partition</span>
<span class="sd">            the population into groups whose outcome should have parity, if `protected_attributes` is an empty list</span>
<span class="sd">            then automatic detection of protected attributes is run,</span>
<span class="sd">            if `fairness_info` is passed then the fairness metric is calculated</span>
<span class="sd">        :type fairness_info: fairness_info</span>

<span class="sd">        :param n_parallel_data_connections: number of maximum parallel connection to data source,</span>
<span class="sd">            supported only for IBM Cloud Pak for Data 4.0.1 and later</span>
<span class="sd">        :type n_parallel_data_connections: int, optional</span>

<span class="sd">        :param categorical_imputation_strategy: missing values imputation strategy for categorical columns</span>

<span class="sd">            Possible values (only non-forecasting scenario):</span>

<span class="sd">            - ImputationStrategy.MEAN</span>
<span class="sd">            - ImputationStrategy.MEDIAN</span>
<span class="sd">            - ImputationStrategy.MOST_FREQUENT (default)</span>

<span class="sd">        :type categorical_imputation_strategy: ImputationStrategy, optional</span>


<span class="sd">        :param numerical_imputation_strategy: missing values imputation strategy for numerical columns</span>

<span class="sd">            Possible values (non-forecasting scenario):</span>

<span class="sd">            - ImputationStrategy.MEAN</span>
<span class="sd">            - ImputationStrategy.MEDIAN (default)</span>
<span class="sd">            - ImputationStrategy.MOST_FREQUENT</span>

<span class="sd">            Possible values (forecasting scenario):</span>

<span class="sd">            - ImputationStrategy.MEAN</span>
<span class="sd">            - ImputationStrategy.MEDIAN</span>
<span class="sd">            - ImputationStrategy.BEST_OF_DEFAULT_IMPUTERS (default)</span>
<span class="sd">            - ImputationStrategy.VALUE</span>
<span class="sd">            - ImputationStrategy.FLATTEN_ITERATIVE</span>
<span class="sd">            - ImputationStrategy.LINEAR</span>
<span class="sd">            - ImputationStrategy.CUBIC</span>
<span class="sd">            - ImputationStrategy.PREVIOUS</span>
<span class="sd">            - ImputationStrategy.NEXT</span>
<span class="sd">            - ImputationStrategy.NO_IMPUTATION</span>

<span class="sd">        :param numerical_imputation_value: value for filling missing values if numerical_imputation_strategy</span>
<span class="sd">            is set to ImputationStrategy.VALUE, for forecasting only</span>
<span class="sd">        :type numerical_imputation_value: float, optional</span>

<span class="sd">        :param imputation_threshold: maximum threshold of missing values imputation, for forecasting only</span>
<span class="sd">        :type imputation_threshold: float, optional</span>

<span class="sd">        :param retrain_on_holdout: if `True`, final pipelines are trained also on holdout data</span>
<span class="sd">        :type retrain_on_holdout: bool, optional</span>

<span class="sd">        :param categorical_columns: list of columns names to be treated as categorical</span>
<span class="sd">        :type categorical_columns: list, optional</span>

<span class="sd">        :param numerical_columns: list of columns names to be treated as numerical</span>
<span class="sd">        :type numerical_columns: list, optional</span>

<span class="sd">        :param sampling_type: type of sampling data for training, one of SamplingTypes enum values,</span>
<span class="sd">            default is SamplingTypes.FIRST_N_RECORDS, supported only for IBM Cloud Pak for Data 4.0.1 and later</span>
<span class="sd">        :type sampling_type: str, optional</span>

<span class="sd">        :param sample_size_limit: size of the sample upper bound (in bytes). The default value is 1 GB,</span>
<span class="sd">            supported only for IBM Cloud Pak for Data 4.5 and later</span>
<span class="sd">        :type sample_size_limit: int, optional</span>

<span class="sd">        :param sample_rows_limit: size of the sample upper bound (in rows),</span>
<span class="sd">            supported only for IBM Cloud Pak for Data 4.6 and later</span>
<span class="sd">        :type sample_rows_limit: int, optional</span>

<span class="sd">        :param sample_percentage_limit: size of the sample upper bound (as fraction of dataset size),</span>
<span class="sd">            supported only for IBM Cloud Pak for Data 4.6 and later</span>
<span class="sd">        :type sample_percentage_limit: float, optional</span>

<span class="sd">        :param number_of_batch_rows: number of rows to read in each batch when reading from the flight connection</span>
<span class="sd">        :type number_of_batch_rows: int, optional</span>

<span class="sd">        :param test_data_csv_separator: the separator or list of separators for separating</span>
<span class="sd">            columns in a CSV user-defined holdout/test file, not used if the file_name is not a CSV file,</span>
<span class="sd">            default is &#39;,&#39;</span>
<span class="sd">        :type test_data_csv_separator: list[str] or str, optional</span>

<span class="sd">        :param test_data_excel_sheet: name of the excel sheet to use for user-defined holdout/test data,</span>
<span class="sd">            use only when the xlsx file is a test, dataset file, by default first sheet is used</span>
<span class="sd">        :type test_data_excel_sheet: str or int, optional</span>

<span class="sd">        :param test_data_encoding: encoding type for the CSV user-defined holdout/test file</span>
<span class="sd">        :type test_data_encoding: str, optional</span>

<span class="sd">        :param confidence_level: when the pipeline &quot;PointwiseBoundedHoltWinters&quot; or &quot;PointwiseBoundedBATS&quot; is used,</span>
<span class="sd">            the prediction interval is calculated at a given confidence_level to decide if a data record</span>
<span class="sd">            is an anomaly or not, optional for timeseries anomaly prediction</span>
<span class="sd">        :type confidence_level: float, optional</span>

<span class="sd">        :param incremental_learning: triggers incremental learning process for supported pipelines</span>
<span class="sd">        :type incremental_learning: bool, optional</span>

<span class="sd">        :param early_stop_enabled: enables early stop for incremental learning process</span>
<span class="sd">        :type early_stop_enabled: bool, optional</span>

<span class="sd">        :param early_stop_window_size: the number of iterations without score improvements before the training stops</span>
<span class="sd">        :type early_stop_window_size: int, optional</span>

<span class="sd">        :param time_ordered_data: defines your preference about time-based analysis, if `True`, the analysis</span>
<span class="sd">            considers the data as time-ordered and time-based, supported only for regression</span>
<span class="sd">        :type time_ordered_data: bool, optional</span>

<span class="sd">        :param feature_selector_mode: defines if feature selector should be triggered [&quot;on&quot;, &quot;off&quot;, &quot;auto&quot;]</span>
<span class="sd">                the &quot;auto&quot; mode analyzes the impact of removing insignificant features, if there is a drop in accuracy,</span>
<span class="sd">                the PCA is applied to insignificant features, principal components that describe variance in 30% or higher</span>
<span class="sd">                are selected in place of insignificant features and the model is evaluated again, if there is still a drop</span>
<span class="sd">                in accuracy, all features are used</span>
<span class="sd">                the &quot;on&quot; mode removes all insignificant features (0.0. importance), the feature selector is applied during</span>
<span class="sd">                cognito phase (applicable to pipelines with feature engineering stage)</span>
<span class="sd">        :type feature_selector_mode: str, optional</span>

<span class="sd">        :return: RemoteAutoPipelines or LocalAutoPipelines, depends on how you initialize the AutoAI object</span>
<span class="sd">        :rtype: RemoteAutoPipelines or LocalAutoPipelines</span>

<span class="sd">        **Examples**</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from ibm_watsonx_ai.experiment import AutoAI</span>
<span class="sd">            experiment = AutoAI(...)</span>

<span class="sd">            fairness_info = {</span>
<span class="sd">                       &quot;protected_attributes&quot;: [</span>
<span class="sd">                           {&quot;feature&quot;: &quot;Sex&quot;, &quot;reference_group&quot;: [&#39;male&#39;], &quot;monitored_group&quot;: [&#39;female&#39;]},</span>
<span class="sd">                           {&quot;feature&quot;: &quot;Age&quot;, &quot;reference_group&quot;: [[50,60]], &quot;monitored_group&quot;: [[18, 49]]}</span>
<span class="sd">                       ],</span>
<span class="sd">                       &quot;favorable_labels&quot;: [&quot;No Risk&quot;],</span>
<span class="sd">                       &quot;unfavorable_labels&quot;: [&quot;Risk&quot;],</span>
<span class="sd">                       }</span>

<span class="sd">            optimizer = experiment.optimizer(</span>
<span class="sd">                   name=&quot;name of the optimizer.&quot;,</span>
<span class="sd">                   prediction_type=AutoAI.PredictionType.BINARY,</span>
<span class="sd">                   prediction_column=&quot;y&quot;,</span>
<span class="sd">                   scoring=AutoAI.Metrics.ROC_AUC_SCORE,</span>
<span class="sd">                   desc=&quot;Some description.&quot;,</span>
<span class="sd">                   holdout_size=0.1,</span>
<span class="sd">                   max_number_of_estimators=1,</span>
<span class="sd">                   fairness_info= fairness_info,</span>
<span class="sd">                   cognito_transform_names=[AutoAI.Transformers.SUM,AutoAI.Transformers.MAX],</span>
<span class="sd">                   train_sample_rows_test_size=1,</span>
<span class="sd">                   include_only_estimators=[AutoAI.ClassificationAlgorithms.LGBM, AutoAI.ClassificationAlgorithms.XGB],</span>
<span class="sd">                   t_shirt_size=AutoAI.TShirtSize.L</span>
<span class="sd">               )</span>

<span class="sd">            optimizer = experiment.optimizer(</span>
<span class="sd">                   name=&quot;name of the optimizer.&quot;,</span>
<span class="sd">                   prediction_type=AutoAI.PredictionType.MULTICLASS,</span>
<span class="sd">                   prediction_column=&quot;y&quot;,</span>
<span class="sd">                   scoring=AutoAI.Metrics.ROC_AUC_SCORE,</span>
<span class="sd">                   desc=&quot;Some description.&quot;,</span>
<span class="sd">               )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># note: convert `timeseries` type to PredictionType.FORECASTING:</span>
        <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="s2">&quot;timeseries&quot;</span><span class="p">:</span>
            <span class="n">prediction_type</span> <span class="o">=</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">FORECASTING</span>

        <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">!=</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">FORECASTING</span> <span class="ow">and</span> <span class="n">retrain_on_holdout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">retrain_on_holdout</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Deprecation of excel_sheet as number:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excel_sheet</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">warn</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Support for excel sheet as number of the sheet (int) is deprecated! Please set excel sheet with name of the sheet.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">TIMESERIES_ANOMALY_PREDICTION</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">api_client</span><span class="o">.</span><span class="n">ICP_PLATFORM_SPACES</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">api_client</span><span class="o">.</span><span class="n">credentials</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span>
                <span class="p">(</span><span class="s2">&quot;2.5&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">,</span> <span class="s2">&quot;3.5&quot;</span><span class="p">,</span> <span class="s2">&quot;4.0&quot;</span><span class="p">,</span> <span class="s2">&quot;4.5&quot;</span><span class="p">,</span> <span class="s2">&quot;4.6&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="n">TSADNotSupported</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">prediction_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">PredictionType</span><span class="o">.</span><span class="n">FORECASTING</span><span class="p">,</span> <span class="s2">&quot;timeseries&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="n">numerical_imputation_strategy</span>
                <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">numerical_imputation_strategy</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">list</span>
            <span class="p">):</span>
                <span class="n">numerical_imputation_strategy</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">ImputationStrategy</span><span class="o">.</span><span class="n">BEST_OF_DEFAULT_IMPUTERS</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="n">numerical_imputation_strategy</span>
                <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">numerical_imputation_strategy</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span>
            <span class="p">):</span>
                <span class="n">numerical_imputation_strategy</span> <span class="o">=</span> <span class="n">ImputationStrategy</span><span class="o">.</span><span class="n">NO_IMPUTATION</span>

            <span class="k">if</span> <span class="n">prediction_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">prediction_columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ForecastPredictionColumnsMissing</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">TIMESERIES_ANOMALY_PREDICTION</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">feature_columns</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="ow">or</span> <span class="n">prediction_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">or</span> <span class="n">prediction_columns</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="n">TimeseriesAnomalyPredictionFeatureColumnsMissing</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">scoring</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">scoring</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span>
                <span class="n">Metrics</span><span class="o">.</span><span class="n">F1_SCORE</span><span class="p">,</span>
                <span class="n">Metrics</span><span class="o">.</span><span class="n">ROC_AUC_SCORE</span><span class="p">,</span>
                <span class="n">Metrics</span><span class="o">.</span><span class="n">AVERAGE_PRECISION_SCORE</span><span class="p">,</span>
                <span class="n">Metrics</span><span class="o">.</span><span class="n">PRECISION_SCORE</span><span class="p">,</span>
                <span class="n">Metrics</span><span class="o">.</span><span class="n">RECALL_SCORE</span><span class="p">,</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="n">TimeseriesAnomalyPredictionUnsupportedMetric</span><span class="p">(</span><span class="n">scoring</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prediction_column</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">prediction_columns</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">NonForecastPredictionColumnMissing</span><span class="p">(</span><span class="n">prediction_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">test_size</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Note: Using `test_size` is deprecated. Use `holdout_size` instead.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">holdout_size</span><span class="p">:</span>
                <span class="n">holdout_size</span> <span class="o">=</span> <span class="n">test_size</span>
            <span class="n">test_size</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">daub_include_only_estimators</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Note: Using `daub_include_only_estimators` is deprecated. Use `include_only_estimators` instead.&quot;</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">include_only_estimators</span><span class="p">:</span>
                <span class="n">include_only_estimators</span> <span class="o">=</span> <span class="n">daub_include_only_estimators</span>
            <span class="n">daub_include_only_estimators</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">train_sample_rows_test_size</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">api_client</span><span class="o">.</span><span class="n">CPD_version</span> <span class="o">&gt;=</span> <span class="mf">4.6</span>
        <span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Note: Using `train_sample_rows_test_size` is deprecated.&quot;</span>
                <span class="s2">&quot;Use either `sample_rows_limit` or `sample_percentage_limit` instead.&quot;</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sample_rows_limit</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">sample_percentage_limit</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="nb">type</span><span class="p">(</span><span class="n">train_sample_rows_test_size</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">float</span>
                    <span class="ow">and</span> <span class="n">train_sample_rows_test_size</span> <span class="o">&lt;=</span> <span class="mi">1</span>
                <span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s2">&quot;Value of `train_sample_rows_test_size` parameter&quot;</span>
                        <span class="s2">&quot;will be passed as `sample_percentage_limit`.&quot;</span>
                    <span class="p">)</span>
                    <span class="n">sample_percentage_limit</span> <span class="o">=</span> <span class="n">train_sample_rows_test_size</span>
                <span class="k">elif</span> <span class="p">(</span>
                    <span class="nb">int</span><span class="p">(</span><span class="n">train_sample_rows_test_size</span><span class="p">)</span> <span class="o">==</span> <span class="n">train_sample_rows_test_size</span>
                    <span class="ow">and</span> <span class="n">train_sample_rows_test_size</span> <span class="o">&gt;</span> <span class="mi">1</span>
                <span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s2">&quot;Value of `train_sample_rows_test_size` parameter&quot;</span>
                        <span class="s2">&quot;will be passed as `sample_rows_limit`.&quot;</span>
                    <span class="p">)</span>
                    <span class="n">sample_rows_limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">train_sample_rows_test_size</span><span class="p">)</span>
                <span class="n">train_sample_rows_test_size</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">sample_rows_limit</span> <span class="ow">or</span> <span class="n">sample_percentage_limit</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Parameter `train_sample_rows_test_size` will be ignored.&quot;</span><span class="p">)</span>
                <span class="n">train_sample_rows_test_size</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="nf">translate_str_imputation_param</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span> <span class="ow">and</span> <span class="n">prediction_type</span> <span class="o">!=</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">FORECASTING</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ImputationListNotSupported</span><span class="p">()</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">translate_imputation_string_strategy_to_enum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">prediction_type</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">x</span>

        <span class="k">def</span> <span class="nf">translate_str_include_only_estimators_param</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">translate_estimator_string_to_enum</span><span class="p">(</span><span class="n">estimator</span><span class="p">)</span> <span class="k">for</span> <span class="n">estimator</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">translate_str_include_batched_ensemble_estimators_param</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="n">translate_batched_estimator_string_to_enum</span><span class="p">(</span><span class="n">estimator</span><span class="p">)</span> <span class="k">for</span> <span class="n">estimator</span> <span class="ow">in</span> <span class="n">x</span>
            <span class="p">]</span>

        <span class="k">def</span> <span class="nf">translate_str_pipeline_types_param</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">TIMESERIES_ANOMALY_PREDICTION</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span>
                    <span class="n">TimeseriesAnomalyPredictionPipelineTypes</span><span class="p">(</span><span class="n">pipeline_type</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">pipeline_type</span> <span class="ow">in</span> <span class="n">x</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">ForecastingPipelineTypes</span><span class="p">(</span><span class="n">pipeline_type</span><span class="p">)</span> <span class="k">for</span> <span class="n">pipeline_type</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

        <span class="n">categorical_imputation_strategy</span> <span class="o">=</span> <span class="n">translate_str_imputation_param</span><span class="p">(</span>
            <span class="n">categorical_imputation_strategy</span>
        <span class="p">)</span>
        <span class="n">numerical_imputation_strategy</span> <span class="o">=</span> <span class="n">translate_str_imputation_param</span><span class="p">(</span>
            <span class="n">numerical_imputation_strategy</span>
        <span class="p">)</span>
        <span class="n">include_only_estimators</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">translate_str_include_only_estimators_param</span><span class="p">(</span><span class="n">include_only_estimators</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">include_only_estimators</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="n">include_batched_ensemble_estimators</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">translate_str_include_batched_ensemble_estimators_param</span><span class="p">(</span>
                <span class="n">include_batched_ensemble_estimators</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">include_batched_ensemble_estimators</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="n">pipeline_types</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">translate_str_pipeline_types_param</span><span class="p">(</span><span class="n">pipeline_types</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pipeline_types</span> <span class="o">!=</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">include_batched_ensemble_estimators</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">batched_estimator</span> <span class="ow">in</span> <span class="n">include_batched_ensemble_estimators</span><span class="p">:</span>
                <span class="n">basic_estimator_str</span> <span class="o">=</span> <span class="n">batched_estimator</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">basic_estimator</span> <span class="o">=</span> <span class="n">translate_estimator_string_to_enum</span><span class="p">(</span>
                    <span class="n">basic_estimator_str</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">include_only_estimators</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="ow">and</span> <span class="n">basic_estimator</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">include_only_estimators</span>
                <span class="p">):</span>
                    <span class="k">raise</span> <span class="n">MissingEstimatorForExistingBatchedEstimator</span><span class="p">(</span>
                        <span class="n">batched_estimator</span><span class="p">,</span> <span class="n">basic_estimator</span>
                    <span class="p">)</span>

        <span class="n">validate_optimizer_enum_values</span><span class="p">(</span>
            <span class="n">prediction_type</span><span class="o">=</span><span class="n">prediction_type</span><span class="p">,</span>
            <span class="n">daub_include_only_estimators</span><span class="o">=</span><span class="n">daub_include_only_estimators</span><span class="p">,</span>
            <span class="n">include_only_estimators</span><span class="o">=</span><span class="n">include_only_estimators</span><span class="p">,</span>
            <span class="n">include_batched_ensemble_estimators</span><span class="o">=</span><span class="n">include_batched_ensemble_estimators</span><span class="p">,</span>
            <span class="n">cognito_transform_names</span><span class="o">=</span><span class="n">cognito_transform_names</span><span class="p">,</span>
            <span class="n">imputation_strategies</span><span class="o">=</span><span class="p">[</span>
                <span class="n">x</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span>
                    <span class="nb">filter</span><span class="p">(</span>
                        <span class="kc">None</span><span class="p">,</span>
                        <span class="p">[</span>
                            <span class="n">categorical_imputation_strategy</span><span class="p">,</span>
                            <span class="n">numerical_imputation_strategy</span><span class="p">,</span>
                        <span class="p">],</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">y</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span> <span class="k">else</span> <span class="p">[</span><span class="n">y</span><span class="p">])</span>
            <span class="p">],</span>
            <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">,</span>
            <span class="n">t_shirt_size</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;t_shirt_size&quot;</span><span class="p">,</span> <span class="n">TShirtSize</span><span class="o">.</span><span class="n">M</span><span class="p">),</span>
            <span class="n">is_cpd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">api_client</span><span class="o">.</span><span class="n">ICP_PLATFORM_SPACES</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">daub_give_priority_to_runtime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">daub_give_priority_to_runtime</span> <span class="o">&lt;</span> <span class="mf">0.0</span>
                <span class="ow">or</span> <span class="n">daub_give_priority_to_runtime</span> <span class="o">&gt;</span> <span class="mf">5.0</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="n">ParamOutOfRange</span><span class="p">(</span>
                    <span class="s2">&quot;daub_give_priority_to_runtime&quot;</span><span class="p">,</span>
                    <span class="n">daub_give_priority_to_runtime</span><span class="p">,</span>
                    <span class="mf">0.0</span><span class="p">,</span>
                    <span class="mf">5.0</span><span class="p">,</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">BINARY</span>
            <span class="ow">and</span> <span class="n">scoring</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="n">PositiveLabelClass</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
            <span class="ow">and</span> <span class="n">positive_label</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="n">MissingPositiveLabel</span><span class="p">(</span>
                <span class="n">scoring</span><span class="p">,</span>
                <span class="n">reason</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">scoring</span><span class="si">}</span><span class="s1">&quot; needs a &quot;positive_label&quot; &#39;</span>
                <span class="sa">f</span><span class="s2">&quot;parameter to be defined when used with binary classification.&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;t_shirt_size&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">LocalInstanceButRemoteParameter</span><span class="p">(</span>
                <span class="s2">&quot;t_shirt_size&quot;</span><span class="p">,</span>
                <span class="n">reason</span><span class="o">=</span><span class="s1">&#39;During LocalOptimizer initialization, &quot;t_shirt_size&quot; parameter was provided. &#39;</span>
                <span class="s1">&#39;&quot;t_shirt_size&quot; parameter is only applicable to the RemoteOptimizer instance.&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">FORECASTING</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ForecastingCannotBeRunAsLocalScenario</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">TIMESERIES_ANOMALY_PREDICTION</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">TimeseriesAnomalyPredictionCannotBeRunAsLocalScenario</span><span class="p">()</span>

            <span class="n">reduced_kwargs</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;_force_local_scenario&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">reduced_kwargs</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">reduced_kwargs</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>

            <span class="n">validate_additional_params_for_optimizer</span><span class="p">(</span><span class="n">reduced_kwargs</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">LocalAutoPipelines</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">prediction_type</span><span class="o">=</span><span class="p">(</span>
                    <span class="s2">&quot;classification&quot;</span>
                    <span class="k">if</span> <span class="n">prediction_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;binary&quot;</span><span class="p">,</span> <span class="s2">&quot;multiclass&quot;</span><span class="p">]</span>
                    <span class="k">else</span> <span class="n">prediction_type</span>
                <span class="p">),</span>
                <span class="n">prediction_column</span><span class="o">=</span><span class="n">prediction_column</span><span class="p">,</span>
                <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">,</span>
                <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span>
                <span class="n">holdout_size</span><span class="o">=</span><span class="n">holdout_size</span><span class="p">,</span>
                <span class="n">max_num_daub_ensembles</span><span class="o">=</span><span class="n">max_number_of_estimators</span><span class="p">,</span>
                <span class="n">train_sample_rows_test_size</span><span class="o">=</span><span class="n">train_sample_rows_test_size</span><span class="p">,</span>
                <span class="n">include_only_estimators</span><span class="o">=</span><span class="n">include_only_estimators</span><span class="p">,</span>
                <span class="n">include_batched_ensemble_estimators</span><span class="o">=</span><span class="n">include_batched_ensemble_estimators</span><span class="p">,</span>
                <span class="n">cognito_transform_names</span><span class="o">=</span><span class="n">cognito_transform_names</span><span class="p">,</span>
                <span class="n">positive_label</span><span class="o">=</span><span class="n">positive_label</span><span class="p">,</span>
                <span class="n">_force_local_scenario</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_force_local_scenario&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
                <span class="o">**</span><span class="n">reduced_kwargs</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">reduced_kwargs</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">max_number_of_estimators</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">max_number_of_estimators</span> <span class="o">=</span> <span class="n">reduced_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="s2">&quot;max_num_daub_ensembles&quot;</span><span class="p">,</span> <span class="kc">None</span>
                <span class="p">)</span>

            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="s2">&quot;t_shirt_size&quot;</span><span class="p">,</span>
                <span class="s2">&quot;notebooks&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoai_pod_version&quot;</span><span class="p">,</span>
                <span class="s2">&quot;max_num_daub_ensembles&quot;</span><span class="p">,</span>
            <span class="p">]:</span>
                <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">reduced_kwargs</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">reduced_kwargs</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>

            <span class="n">validate_additional_params_for_optimizer</span><span class="p">(</span><span class="n">reduced_kwargs</span><span class="p">)</span>

            <span class="n">engine</span> <span class="o">=</span> <span class="n">ServiceEngine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_20_class_limit_removal_test</span><span class="p">:</span>
                <span class="n">engine</span><span class="o">.</span><span class="n">_20_class_limit_removal_test</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="n">optimizer</span> <span class="o">=</span> <span class="n">RemoteAutoPipelines</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">prediction_type</span><span class="o">=</span><span class="n">prediction_type</span><span class="p">,</span>
                <span class="n">prediction_column</span><span class="o">=</span><span class="n">prediction_column</span><span class="p">,</span>
                <span class="n">prediction_columns</span><span class="o">=</span><span class="n">prediction_columns</span><span class="p">,</span>
                <span class="n">timestamp_column_name</span><span class="o">=</span><span class="n">timestamp_column_name</span><span class="p">,</span>
                <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">,</span>
                <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span>
                <span class="n">holdout_size</span><span class="o">=</span><span class="n">holdout_size</span><span class="p">,</span>
                <span class="n">max_num_daub_ensembles</span><span class="o">=</span><span class="n">max_number_of_estimators</span><span class="p">,</span>
                <span class="n">t_shirt_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">restrict_pod_size</span><span class="p">(</span>
                    <span class="n">t_shirt_size</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="s2">&quot;t_shirt_size&quot;</span><span class="p">,</span>
                        <span class="p">(</span>
                            <span class="n">TShirtSize</span><span class="o">.</span><span class="n">M</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">api_client</span><span class="o">.</span><span class="n">ICP_PLATFORM_SPACES</span>
                            <span class="k">else</span> <span class="n">TShirtSize</span><span class="o">.</span><span class="n">L</span>
                        <span class="p">),</span>
                    <span class="p">)</span>
                <span class="p">),</span>
                <span class="n">train_sample_rows_test_size</span><span class="o">=</span><span class="n">train_sample_rows_test_size</span><span class="p">,</span>
                <span class="n">include_only_estimators</span><span class="o">=</span><span class="n">include_only_estimators</span><span class="p">,</span>
                <span class="n">include_batched_ensemble_estimators</span><span class="o">=</span><span class="n">include_batched_ensemble_estimators</span><span class="p">,</span>
                <span class="n">backtest_num</span><span class="o">=</span><span class="n">backtest_num</span><span class="p">,</span>
                <span class="n">lookback_window</span><span class="o">=</span><span class="n">lookback_window</span><span class="p">,</span>
                <span class="n">forecast_window</span><span class="o">=</span><span class="n">forecast_window</span><span class="p">,</span>
                <span class="n">backtest_gap_length</span><span class="o">=</span><span class="n">backtest_gap_length</span><span class="p">,</span>
                <span class="n">cognito_transform_names</span><span class="o">=</span><span class="n">cognito_transform_names</span><span class="p">,</span>
                <span class="n">drop_duplicates</span><span class="o">=</span><span class="n">drop_duplicates</span><span class="p">,</span>
                <span class="n">outliers_columns</span><span class="o">=</span><span class="n">outliers_columns</span><span class="p">,</span>
                <span class="n">text_processing</span><span class="o">=</span><span class="n">text_processing</span><span class="p">,</span>
                <span class="n">word2vec_feature_number</span><span class="o">=</span><span class="n">word2vec_feature_number</span><span class="p">,</span>
                <span class="n">csv_separator</span><span class="o">=</span><span class="n">csv_separator</span><span class="p">,</span>
                <span class="n">excel_sheet</span><span class="o">=</span><span class="n">excel_sheet</span><span class="p">,</span>
                <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span>
                <span class="n">positive_label</span><span class="o">=</span><span class="n">positive_label</span><span class="p">,</span>
                <span class="n">engine</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span>
                <span class="n">daub_give_priority_to_runtime</span><span class="o">=</span><span class="n">daub_give_priority_to_runtime</span><span class="p">,</span>
                <span class="n">notebooks</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;notebooks&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                <span class="n">autoai_pod_version</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;autoai_pod_version&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                <span class="n">fairness_info</span><span class="o">=</span><span class="n">fairness_info</span><span class="p">,</span>
                <span class="n">sampling_type</span><span class="o">=</span><span class="n">sampling_type</span><span class="p">,</span>
                <span class="n">sample_size_limit</span><span class="o">=</span><span class="n">sample_size_limit</span><span class="p">,</span>
                <span class="n">sample_rows_limit</span><span class="o">=</span><span class="n">sample_rows_limit</span><span class="p">,</span>
                <span class="n">sample_percentage_limit</span><span class="o">=</span><span class="n">sample_percentage_limit</span><span class="p">,</span>
                <span class="n">number_of_batch_rows</span><span class="o">=</span><span class="n">number_of_batch_rows</span><span class="p">,</span>
                <span class="n">n_parallel_data_connections</span><span class="o">=</span><span class="n">n_parallel_data_connections</span><span class="p">,</span>
                <span class="n">categorical_imputation_strategy</span><span class="o">=</span><span class="n">categorical_imputation_strategy</span><span class="p">,</span>
                <span class="n">numerical_imputation_strategy</span><span class="o">=</span><span class="n">numerical_imputation_strategy</span><span class="p">,</span>
                <span class="n">numerical_imputation_value</span><span class="o">=</span><span class="n">numerical_imputation_value</span><span class="p">,</span>
                <span class="n">imputation_threshold</span><span class="o">=</span><span class="n">imputation_threshold</span><span class="p">,</span>
                <span class="n">retrain_on_holdout</span><span class="o">=</span><span class="n">retrain_on_holdout</span><span class="p">,</span>
                <span class="n">numerical_columns</span><span class="o">=</span><span class="n">numerical_columns</span><span class="p">,</span>
                <span class="n">categorical_columns</span><span class="o">=</span><span class="n">categorical_columns</span><span class="p">,</span>
                <span class="n">feature_columns</span><span class="o">=</span><span class="n">feature_columns</span><span class="p">,</span>
                <span class="n">pipeline_types</span><span class="o">=</span><span class="n">pipeline_types</span><span class="p">,</span>
                <span class="n">supporting_features_at_forecast</span><span class="o">=</span><span class="n">supporting_features_at_forecast</span><span class="p">,</span>
                <span class="n">test_data_csv_separator</span><span class="o">=</span><span class="n">test_data_csv_separator</span><span class="p">,</span>
                <span class="n">test_data_excel_sheet</span><span class="o">=</span><span class="n">test_data_excel_sheet</span><span class="p">,</span>
                <span class="n">test_data_encoding</span><span class="o">=</span><span class="n">test_data_encoding</span><span class="p">,</span>
                <span class="n">confidence_level</span><span class="o">=</span><span class="n">confidence_level</span><span class="p">,</span>
                <span class="n">incremental_learning</span><span class="o">=</span><span class="n">incremental_learning</span><span class="p">,</span>
                <span class="n">early_stop_enabled</span><span class="o">=</span><span class="n">early_stop_enabled</span><span class="p">,</span>
                <span class="n">early_stop_window_size</span><span class="o">=</span><span class="n">early_stop_window_size</span><span class="p">,</span>
                <span class="n">time_ordered_data</span><span class="o">=</span><span class="n">time_ordered_data</span><span class="p">,</span>
                <span class="n">feature_selector_mode</span><span class="o">=</span><span class="n">feature_selector_mode</span><span class="p">,</span>
                <span class="o">**</span><span class="n">reduced_kwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">optimizer</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span>
            <span class="k">return</span> <span class="n">optimizer</span></div>


<div class="viewcode-block" id="AutoAI.rag_optimizer">
<a class="viewcode-back" href="../../../../autoai_experiment.html#ibm_watsonx_ai.experiment.autoai.autoai.AutoAI.rag_optimizer">[docs]</a>
    <span class="k">def</span> <span class="nf">rag_optimizer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">chunking_methods</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">embedding_models</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">retrieval_methods</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">foundation_models</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_number_of_rag_patterns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">optimization_metrics</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;RAGOptimizer&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an AutoAi RAG optimizer.</span>

<span class="sd">        :param name: name for the RAGOptimizer</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :param description: description for the RAGOptimizer</span>
<span class="sd">        :type description: str, optional</span>

<span class="sd">        :param chunking_methods: Chunking method name to be used.</span>
<span class="sd">        :type chunking_methods: list[str], optional</span>

<span class="sd">        :param embedding_models: The embedding models to try.</span>
<span class="sd">        :type embedding_models: list[str], optional</span>

<span class="sd">        :param retrieval_methods: Retrieval methods to be used.</span>
<span class="sd">        :type retrieval_methods: list[str], optional</span>

<span class="sd">        :param foundation_models: The foundation models to try.</span>
<span class="sd">        :type foundation_models: list[str], optional</span>

<span class="sd">        :param max_number_of_rag_patterns: The maximum number of RAG patterns to create.</span>
<span class="sd">        :type max_number_of_rag_patterns: int, optional</span>

<span class="sd">        :param optimization_metrics: The metric name(s) to be used for optimization.</span>
<span class="sd">        :type optimization_metrics: list[str], optional</span>

<span class="sd">        :return: AutoAI RAG optimizer</span>
<span class="sd">        :rtype: RAGOptimizer</span>

<span class="sd">        **Examples**</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from ibm_watsonx_ai.experiment import AutoAI</span>
<span class="sd">            experiment = AutoAI(...)</span>

<span class="sd">            optimizer = experiment.rag_optimizer(</span>
<span class="sd">                name=&quot;RAG - AutoAI&quot;,</span>
<span class="sd">                description=&quot;Sample description&quot;,</span>
<span class="sd">                max_number_of_rag_patterns=5,</span>
<span class="sd">                optimization_metrics=[&quot;answer_correctness&quot;]</span>
<span class="sd">            )</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.engines</span> <span class="kn">import</span> <span class="n">RAGEngine</span>

        <span class="n">engine</span> <span class="o">=</span> <span class="n">RAGEngine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="p">)</span>

        <span class="kn">from</span> <span class="nn">.optimizers</span> <span class="kn">import</span> <span class="n">RAGOptimizer</span>

        <span class="n">optimizer</span> <span class="o">=</span> <span class="n">RAGOptimizer</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">chunking_methods</span><span class="o">=</span><span class="n">chunking_methods</span><span class="p">,</span>
            <span class="n">embedding_models</span><span class="o">=</span><span class="n">embedding_models</span><span class="p">,</span>
            <span class="n">retrieval_methods</span><span class="o">=</span><span class="n">retrieval_methods</span><span class="p">,</span>
            <span class="n">foundation_models</span><span class="o">=</span><span class="n">foundation_models</span><span class="p">,</span>
            <span class="n">max_number_of_rag_patterns</span><span class="o">=</span><span class="n">max_number_of_rag_patterns</span><span class="p">,</span>
            <span class="n">optimization_metrics</span><span class="o">=</span><span class="n">optimization_metrics</span><span class="p">,</span>
            <span class="n">engine</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">optimizer</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span>

        <span class="k">return</span> <span class="n">optimizer</span></div>


    <span class="k">def</span> <span class="nf">_init_estimator_enums</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">api_client</span><span class="o">.</span><span class="n">ICP_PLATFORM_SPACES</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ClassificationAlgorithms</span> <span class="o">=</span> <span class="n">ClassificationAlgorithmsCP4D</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RegressionAlgorithms</span> <span class="o">=</span> <span class="n">RegressionAlgorithmsCP4D</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ForecastingAlgorithms</span> <span class="o">=</span> <span class="n">ForecastingAlgorithmsCP4D</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ClassificationAlgorithms</span> <span class="o">=</span> <span class="n">ClassificationAlgorithms</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RegressionAlgorithms</span> <span class="o">=</span> <span class="n">RegressionAlgorithms</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ForecastingAlgorithms</span> <span class="o">=</span> <span class="n">ForecastingAlgorithms</span>

    <span class="k">def</span> <span class="nf">_block_autoai_on_git_based_project</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Raises ForbiddenActionForGitBasedProject error for AutoAI experiments on git based project.</span>
<span class="sd">        It can be disabled by setting environment variable ENABLE_AUTOAI to &#39;true&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">environ</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">api_client</span><span class="p">,</span> <span class="s2">&quot;project_type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="o">==</span> <span class="s2">&quot;local_git_storage&quot;</span>
                <span class="ow">and</span> <span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ENABLE_AUTOAI&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;false&quot;</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="n">ForbiddenActionForGitBasedProject</span><span class="p">(</span>
                    <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Creating AutoAI experiment is not supported for git based project.&quot;</span>
                <span class="p">)</span></div>

</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023-2024, IBM
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>